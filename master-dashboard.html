<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุชุญูู ุงููุณุชุฑ - ููุตุฉ ุชุนููู ุงูุจุฑูุฌุฉ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="cosmic-background">
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="planet planet-earth"></div>
        <div class="planet planet-moon"></div>
        <div class="sun"></div>
    </div>

    <div class="dashboard-header">
        <div class="cosmic-logo">
            <h1>ููุญุฉ ุชุญูู ุงููุณุชุฑ</h1>
            <div class="user-info">
                <div class="welcome-text" id="masterWelcome">ูุฑุญุจุงูุ ุงููุณุชุฑ</div>
                <div class="user-type-badge">ูุณุชุฑ</div>
            </div>
        </div>
    </div>

    <div class="dashboard-content">
        <!-- ุฅุญุตุงุฆูุงุช ุณุฑูุนุฉ -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="classStudents">0</div>
                <div class="stat-label">ุทูุงุจ ุงููุตู</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="activeStudents">0</div>
                <div class="stat-label">ุทูุงุจ ูุดุทูู</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="completedCourses">0</div>
                <div class="stat-label">ููุฑุฑุงุช ููุชููุฉ</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="averageProgress">0%</div>
                <div class="stat-label">ูุชูุณุท ุงูุชูุฏู</div>
            </div>
        </div>

        <!-- ุฅุฏุงุฑุฉ ุทูุงุจ ุงููุตู -->
        <h2 class="section-title">ุฅุฏุงุฑุฉ ุทูุงุจ ุงููุตู</h2>
        
        <div class="users-table">
            <table>
                <thead>
                    <tr>
                        <th>ุงููุนุฑู</th>
                        <th>ุงูุงุณู</th>
                        <th>ุงูุชูุฏู</th>
                        <th>ุขุฎุฑ ูุดุงุท</th>
                        <th>ุงูุญุงูุฉ</th>
                        <th>ุงูุฅุฌุฑุงุกุงุช</th>
                    </tr>
                </thead>
                <tbody id="classStudentsTable">
                    <!-- ุณูุชู ููุคู ุจุงูุจูุงูุงุช -->
                </tbody>
            </table>
        </div>

        <!-- ุฅุถุงูุฉ ุทุงูุจ ุฌุฏูุฏ -->
        <div class="glass-form">
            <h3 style="text-align: center; color: var(--electric-blue); margin-bottom: 30px;">ุฅุถุงูุฉ ุทุงูุจ ุฌุฏูุฏ ูููุตู</h3>
            
            <div class="input-group">
                <input type="text" class="glass-input" id="newStudentId" placeholder="ูุนุฑู ุงูุทุงูุจ (11 ุฑูู)" maxlength="11">
            </div>

            <div class="input-group">
                <input type="text" class="glass-input" id="newStudentName" placeholder="ุงุณู ุงูุทุงูุจ">
            </div>

            <div class="input-group">
                <input type="password" class="glass-input" id="newStudentPassword" placeholder="ูููุฉ ุงููุฑูุฑ">
            </div>

            <button class="ghost-button full-width" onclick="addStudentToClass()">
                ุฅุถุงูุฉ ุทุงูุจ ูููุตู
            </button>
        </div>

        <!-- ุงููุญุชูู ุงูุชุนูููู -->
        <h2 class="section-title">ุงููุญุชูู ุงูุชุนูููู ูููุตู</h2>
        
        <div class="courses-grid">
            <div class="course-card">
                <div class="course-icon">๐</div>
                <h3 class="course-title">ุฅุฏุงุฑุฉ ุงูุฏุฑูุณ</h3>
                <p class="course-description">
                    ุฅูุดุงุก ูุชุนุฏูู ุงูุฏุฑูุณ ุงูุชุนููููุฉ ูููุตู ููุชุงุจุนุฉ ุชูุฏู ุงูุทูุงุจ ูู ูู ุฏุฑุณ.
                </p>
                <button class="select-course" onclick="manageLessons()">
                    ุฅุฏุงุฑุฉ ุงูุฏุฑูุณ
                </button>
            </div>

            <div class="course-card">
                <div class="course-icon">๐</div>
                <h3 class="course-title">ุงูุงุฎุชุจุงุฑุงุช ูุงูุชููููุงุช</h3>
                <p class="course-description">
                    ุฅูุดุงุก ุงุฎุชุจุงุฑุงุช ูููุตู ูุชุชุจุน ูุชุงุฆุฌ ุงูุทูุงุจ ูุชูููู ุฃุฏุงุฆูู.
                </p>
                <button class="select-course" onclick="manageTests()">
                    ุฅุฏุงุฑุฉ ุงูุงุฎุชุจุงุฑุงุช
                </button>
            </div>

            <div class="course-card">
                <div class="course-icon">๐</div>
                <h3 class="course-title">ุชูุงุฑูุฑ ุงูุฃุฏุงุก</h3>
                <p class="course-description">
                    ุนุฑุถ ุชูุงุฑูุฑ ููุตูุฉ ุนู ุฃุฏุงุก ุทูุงุจ ุงููุตู ูุชุญููู ููุงุท ุงูููุฉ ูุงูุถุนู.
                </p>
                <button class="select-course" onclick="viewPerformanceReports()">
                    ุนุฑุถ ุงูุชูุงุฑูุฑ
                </button>
            </div>
        </div>
    </div>

    <!-- ุดุฑูุท ุงูุชููู ุงูุณููู -->
    <div class="bottom-nav">
        <a href="master-dashboard.html" class="nav-item active">
            <div class="nav-icon">๐</div>
            ุงูุฑุฆูุณูุฉ
        </a>
        <a href="#" class="nav-item" onclick="showStudentsManagement()">
            <div class="nav-icon">๐ฅ</div>
            ุงูุทูุงุจ
        </a>
        <a href="#" class="nav-item" onclick="showContentManagement()">
            <div class="nav-icon">๐</div>
            ุงููุญุชูู
        </a>
        <a href="#" class="nav-item" onclick="showReports()">
            <div class="nav-icon">๐</div>
            ุงูุชูุงุฑูุฑ
        </a>
        <a href="login.html" class="nav-item">
            <div class="nav-icon">๐ช</div>
            ุฎุฑูุฌ
        </a>
    </div>

    <!-- ุฒุฑ ูุชุญ -->
<div class="nav-toggle-up" id="openNav">โฒ</div>

<!-- ุฒุฑ ุฅุบูุงู -->
<div class="nav-toggle-down" id="closeNav">โผ</div>
    
    <script>
        // ุชุญููู ุงูุจูุงูุงุช
        document.addEventListener('DOMContentLoaded', function() {
            loadMasterData();
            loadClassStudents();
        });

        // ุชุญููู ุจูุงูุงุช ุงููุณุชุฑ
        function loadMasterData() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (currentUser && currentUser.userType === '1') {
                document.getElementById('masterWelcome').textContent = `ูุฑุญุจุงูุ ${currentUser.fullName}`;
            } else {
                window.location.href = 'login.html';
            }
        }

        // ุชุญููู ุทูุงุจ ุงููุตู
        function loadClassStudents() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            const allUsers = JSON.parse(localStorage.getItem('platformUsers')) || [];
            
            // ููุชุฑุฉ ุงูุทูุงุจ ุงูุชุงุจุนูู ูููุณ ูุฏุฑุณุฉ ุงููุณุชุฑ
            const classStudents = allUsers.filter(user => 
                user.userType === '2' && 
                user.school === currentUser.school
            );

            // ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช
            document.getElementById('classStudents').textContent = classStudents.length;
            document.getElementById('activeStudents').textContent = classStudents.length;
            document.getElementById('completedCourses').textContent = '0';
            document.getElementById('averageProgress').textContent = '0%';

            // ุชุญุฏูุซ ุงูุฌุฏูู
            const tableBody = document.getElementById('classStudentsTable');
            tableBody.innerHTML = '';

            classStudents.forEach(student => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${student.id}</td>
                    <td>${student.fullName}</td>
                    <td>
                        <div style="background: rgba(255,255,255,0.1); border-radius: 10px; height: 10px; width: 100%;">
                            <div style="background: var(--success-color); height: 100%; width: 0%; border-radius: 10px;"></div>
                        </div>
                        <small>0%</small>
                    </td>
                    <td>${new Date().toLocaleDateString('ar-EG')}</td>
                    <td><span style="color: var(--success-color);">โ</span> ูุดุท</td>
                    <td>
                        <button class="btn btn-edit" onclick="viewStudentProgress('${student.id}')">ุชูุฏู</button>
                        <button class="btn btn-delete" onclick="removeStudent('${student.id}')">ุญุฐู</button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        // ุฅุถุงูุฉ ุทุงูุจ ูููุตู
        function addStudentToClass() {
            const studentId = document.getElementById('newStudentId').value;
            const studentName = document.getElementById('newStudentName').value;
            const studentPassword = document.getElementById('newStudentPassword').value;

            if (!studentId || !studentName || !studentPassword) {
                alert('ูุฑุฌู ููุก ุฌููุน ุงูุญููู!');
                return;
            }

            if (studentId.length !== 11) {
                alert('ุงููุนุฑู ูุฌุจ ุฃู ูููู 11 ุฑูู!');
                return;
            }

            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            const users = JSON.parse(localStorage.getItem('platformUsers')) || [];

            // ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ูุนุฑู ููุฑุฑ
            if (users.find(user => user.id === studentId)) {
                alert('ูุฐุง ุงููุนุฑู ููุฌูุฏ ูุณุจูุงู!');
                return;
            }

            const newStudent = {
                id: studentId,
                password: studentPassword,
                fullName: studentName,
                userType: '2',
                governorate: currentUser.governorate,
                city: currentUser.city,
                school: currentUser.school,
                studentId: studentId.slice(-3),
                createdAt: new Date().toISOString(),
                masterId: currentUser.id
            };

            users.push(newStudent);
            localStorage.setItem('platformUsers', JSON.stringify(users));

            alert(`ุชู ุฅุถุงูุฉ ุงูุทุงูุจ ุจูุฌุงุญ!\nุงููุนุฑู: ${studentId}`);

            // ุฅุนุงุฏุฉ ุชุนููู ุงููููุฐุฌ
            document.getElementById('newStudentId').value = '';
            document.getElementById('newStudentName').value = '';
            document.getElementById('newStudentPassword').value = '';

            // ุชุญุฏูุซ ุงูุจูุงูุงุช
            loadClassStudents();
        }

        // ุฅุฒุงูุฉ ุทุงูุจ ูู ุงููุตู
        function removeStudent(studentId) {
            if (confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงูุทุงูุจ ูู ุงููุตูุ')) {
                let users = JSON.parse(localStorage.getItem('platformUsers')) || [];
                users = users.filter(u => u.id !== studentId);
                localStorage.setItem('platformUsers', JSON.stringify(users));
                alert('ุชู ุญุฐู ุงูุทุงูุจ ุจูุฌุงุญ!');
                loadClassStudents();
            }
        }

        // ุนุฑุถ ุชูุฏู ุงูุทุงูุจ
        function viewStudentProgress(studentId) {
            alert(`ุนุฑุถ ุชูุฏู ุงูุทุงูุจ ${studentId} - ูุฐู ุงูุฎุงุตูุฉ ููุฏ ุงูุชุทููุฑ`);
        }

        // ูุธุงุฆู ุฅุฏุงุฑุฉ ุงููุญุชูู
        function manageLessons() {
            alert('ูุธุงู ุฅุฏุงุฑุฉ ุงูุฏุฑูุณ ูุฑูุจุงู...');
        }

        function manageTests() {
            alert('ูุธุงู ุฅุฏุงุฑุฉ ุงูุงุฎุชุจุงุฑุงุช ููุฏ ุงูุชุทููุฑ...');
        }

        function viewPerformanceReports() {
            alert('ูุธุงู ุงูุชูุงุฑูุฑ ููุฏ ุงูุชุทููุฑ...');
        }

        // ูุธุงุฆู ุดุฑูุท ุงูุชููู
        function showStudentsManagement() {
            document.querySelector('.users-table').scrollIntoView({ behavior: 'smooth' });
        }

        function showContentManagement() {
            document.querySelector('.courses-grid').scrollIntoView({ behavior: 'smooth' });
        }

        function showReports() {
            document.querySelector('.stats-grid').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>
